<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¯†åˆ«ç»“æœ - å¤šæ¨¡æ€ç»æµæ—æœå®ç—…å®³è¯†åˆ«ç³»ç»Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background-color: #f5f9fc;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 30px 0;
            background: linear-gradient(135deg, #4CAF50, #2E7D32);
            color: white;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .result-section {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            margin-bottom: 30px;
        }
        
        .section-title {
            font-size: 1.4rem;
            margin-bottom: 20px;
            color: #2E7D32;
            padding-bottom: 10px;
            border-bottom: 2px solid #E8F5E9;
        }
        
        .input-summary {
            background-color: #F9F9F9;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        
        .summary-item {
            margin-bottom: 10px;
            display: flex;
            flex-wrap: wrap;
        }
        
        .summary-label {
            font-weight: 600;
            width: 120px;
            color: #555;
        }
        
        .summary-value {
            flex: 1;
            min-width: 200px;
        }

        .weather-advice {
            background-color: #E8F5E9;
            border-left: 4px solid #4CAF50;
            padding: 15px;
            border-radius: 0 8px 8px 0;
            margin: 20px 0 30px;
        }
        
        .advice-title {
            font-weight: 600;
            color: #2E7D32;
            margin-bottom: 8px;
        }
        
        .disease-advice {
            background-color: #FFF8E1;
            border-left: 4px solid #FF9800;
            padding: 15px;
            border-radius: 0 8px 8px 0;
            margin: 10px 0;
        }
        
        .disease-advice-title {
            font-weight: 600;
            color: #E65100;
            margin-bottom: 5px;
            font-size: 0.95rem;
        }
        
        .disease-advice-content {
            color: #6D4C41;
            font-size: 0.9rem;
            line-height: 1.5;
        }
        
        .disease-item {
            display: flex;
            align-items: flex-start;
            padding: 15px;
            border-bottom: 1px solid #eee;
            transition: background-color 0.3s;
        }
        
        .disease-item:hover {
            background-color: #f9f9f9;
        }
        
        .disease-rank {
            width: 30px;
            height: 30px;
            background-color: #4CAF50;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            margin-top: 2px;
        }
        
        .disease-image {
            width: 80px;
            height: 80px;
            border-radius: 8px;
            overflow: hidden;
            margin-right: 20px;
        }
        
        .disease-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .disease-info {
            flex: 1;
        }
        
        .disease-name {
            font-weight: 600;
            margin-bottom: 5px;
            font-size: 1.1rem;
        }
        
        .disease-desc {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 8px;
        }
        
        .disease-probability {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .probability-bar {
            flex: 1;
            height: 8px;
            background-color: #E0E0E0;
            border-radius: 4px;
            margin-right: 10px;
            overflow: hidden;
        }
        
        .probability-value {
            width: 60px;
            text-align: right;
            font-weight: 600;
            color: #2E7D32;
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }
        
        .back-btn {
            background-color: #757575;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .back-btn:hover {
            background-color: #616161;
        }
        
        .new-identify-btn {
            background-color: #FF9800;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .new-identify-btn:hover {
            background-color: #F57C00;
        }
        
        @media (max-width: 768px) {
            .disease-item {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .disease-image {
                margin-bottom: 15px;
            }
            
            .action-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ç—…å®³è¯†åˆ«ç»“æœ</h1>
            <p class="subtitle">åŸºäºå¤šæ¨¡æ€æ•°æ®çš„æ™ºèƒ½åˆ†æ</p >
        </header>
        
        <div class="result-section">
            <h2 class="section-title">è¾“å…¥ä¿¡æ¯æ‘˜è¦</h2>
            <div class="input-summary" id="inputSummary">
            </div>

            <div class="weather-advice" id="weatherAdvice">
                <div class="advice-title">ğŸ“Œ å¤©æ°”ç›¸å…³ç—…å®³é˜²æ²»å»ºè®®</div>
                <div id="weatherAdviceContent">æ­£åœ¨ç”Ÿæˆå»ºè®®...</div>
            </div>
            
            <h2 class="section-title">è¯†åˆ«ç»“æœï¼ˆæŒ‰åŒ¹é…åº¦æ’åºï¼‰</h2>
            <div id="diseaseResults">
            </div>
            
            <div class="action-buttons">
                <button class="back-btn" id="backBtn">è¿”å›é‡æ–°è¯†åˆ«</button>
                <button class="new-identify-btn" id="newIdentifyBtn">æ–°çš„è¯†åˆ«</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const backBtn = document.getElementById('backBtn');
            const newIdentifyBtn = document.getElementById('newIdentifyBtn');
            const inputSummary = document.getElementById('inputSummary');
            const diseaseResults = document.getElementById('diseaseResults');
            const weatherAdviceContent = document.getElementById('weatherAdviceContent');

            const diseaseDataList = [
                {
                    name: "ç‚­ç–½ç—…",
                    probability: 85,
                    description: "æœå®è¡¨é¢å‡ºç°åœ†å½¢æˆ–ä¸è§„åˆ™å½¢è¤è‰²ç—…æ–‘ï¼ŒåæœŸç—…æ–‘å‡¹é™·ï¼Œä¸­å¤®äº§ç”Ÿé»‘è‰²å°ç‚¹",
                    image: "https://via.placeholder.com/80?text=Anthracnose",
                    advice: "â‘  å†œä¸šé˜²æ²»ï¼šåŠæ—¶æ¸…é™¤ç—…æœã€ç—…å¶ï¼Œå‡å°‘ç—…åŸèŒï¼›â‘¡ åŒ–å­¦é˜²æ²»ï¼šå‘ç—…åˆæœŸå–·æ–½å’ªé²œèƒºæˆ–è‹¯é†šç”²ç¯å”‘ï¼Œ7-10å¤©1æ¬¡ï¼Œè¿å–·2-3æ¬¡ï¼›â‘¢ ç‰©ç†é˜²æ²»ï¼šæœå®å¥—è¢‹ï¼Œé¿å…ç—…åŸèŒæ¥è§¦ã€‚"
                },
                {
                    name: "è¤æ–‘ç—…",
                    probability: 72,
                    description: "å¶ç‰‡å’Œæœå®ä¸Šå‡ºç°è¤è‰²æ–‘ç‚¹ï¼Œè¾¹ç¼˜æ¸…æ™°ï¼ŒåæœŸç—…æ–‘æ‰©å¤§å¹¶èåˆ",
                    image: "https://via.placeholder.com/80?text=Brown+Spot",
                    advice: "â‘  å†œä¸šé˜²æ²»ï¼šåˆç†ä¿®å‰ªï¼Œæ”¹å–„é€šé£é€å…‰æ¡ä»¶ï¼›â‘¡ åŒ–å­¦é˜²æ²»ï¼šå–·æ–½ä»£æ£®é”°é”Œæˆ–å¡å”‘é†šèŒé…¯ï¼Œé‡ç‚¹å–·æ´’å¶ç‰‡èƒŒé¢å’Œæœå®ï¼›â‘¢ æ–½è‚¥ç®¡ç†ï¼šå¢æ–½ç£·é’¾è‚¥ï¼Œæé«˜æ ‘ä½“æŠ—ç—…æ€§ã€‚"
                },
                {
                    name: "é»‘æ–‘ç—…",
                    probability: 65,
                    description: "æœå®è¡¨é¢å‡ºç°é»‘è‰²åœ†å½¢ç—…æ–‘ï¼Œç—…æ–‘ç•¥å¾®å‡¹é™·ï¼Œè¾¹ç¼˜æœ‰é»„è‰²æ™•åœˆ",
                    image: "https://via.placeholder.com/80?text=Black+Spot",
                    advice: "â‘  å†œä¸šé˜²æ²»ï¼šå†¬å­£æ¸…å›­ï¼Œçƒ§æ¯ç—…æ®‹ä½“ï¼›â‘¡ åŒ–å­¦é˜²æ²»ï¼šå‘ç—…åˆæœŸç”¨æˆŠå”‘é†‡æˆ–é†šèŒé…¯å–·é›¾ï¼Œé—´éš”10å¤©å–·1æ¬¡ï¼›â‘¢ æ°´åˆ†ç®¡ç†ï¼šé¿å…æœå›­ç§¯æ°´ï¼Œé™ä½ç”°é—´æ¹¿åº¦ã€‚"
                },
                {
                    name: "ç™½ç²‰ç—…",
                    probability: 58,
                    description: "æœå®å’Œå¶ç‰‡è¡¨é¢è¦†ç›–ç™½è‰²ç²‰çŠ¶éœ‰å±‚ï¼ŒåæœŸç—…æ–‘å˜è¤åæ­»",
                    image: "https://via.placeholder.com/80?text=Powdery+Mildew",
                    advice: "â‘  å†œä¸šé˜²æ²»ï¼šåŠæ—¶æ‘˜é™¤ç—…å¶ç—…æœï¼Œé›†ä¸­æ·±åŸ‹ï¼›â‘¡ åŒ–å­¦é˜²æ²»ï¼šå–·æ–½ä¸‰å”‘é…®æˆ–æ°Ÿç¡…å”‘ï¼Œæ³¨æ„å‡åŒ€å–·é›¾ï¼›â‘¢ ç¯å¢ƒè°ƒæ§ï¼šåŠ å¼ºé€šé£ï¼Œé™ä½ç©ºæ°”æ¹¿åº¦è‡³60%ä»¥ä¸‹ã€‚"
                },
                {
                    name: "è½®çº¹ç—…",
                    probability: 45,
                    description: "æœå®è¡¨é¢å‡ºç°åŒå¿ƒè½®çº¹çŠ¶è¤è‰²ç—…æ–‘ï¼Œç—…æ–‘é€æ¸æ‰©å¤§å¹¶å‡¹é™·",
                    image: "https://via.placeholder.com/80?text=Ring+Spot",
                    advice: "â‘  å†œä¸šé˜²æ²»ï¼šå†¬å­£åˆ®é™¤æå¹²ç—…ç˜¤ï¼Œæ¶‚æŠ¹è…æ®–é…¸é“œï¼›â‘¡ åŒ–å­¦é˜²æ²»ï¼šè°¢èŠ±åå–·æ–½ä»£æ£®é”Œæˆ–è‹¯ç”²Â·ä¸™ç¯å”‘ï¼›â‘¢ æœå®ä¿æŠ¤ï¼šå¹¼æœæœŸè¿›è¡Œå¥—è¢‹ï¼Œå‡å°‘ä¾µæŸ“æœºä¼šã€‚"
                }
            ];

            function shuffleArray(array) {
                const newArray = [...array];
                for (let i = newArray.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
                }
                return newArray.sort((a, b) => b.probability - a.probability);
            }
            const randomDiseaseList = shuffleArray(diseaseDataList);

            const diseaseInputData = JSON.parse(sessionStorage.getItem('diseaseData') || '{}');
            if (diseaseInputData.image) {
                inputSummary.innerHTML = `
                    <div class="summary-item">
                        <span class="summary-label">ä¸Šä¼ å›¾åƒ:</span>
                        <span class="summary-value">${diseaseInputData.image}</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">ç—…å®³æè¿°:</span>
                        <span class="summary-value">${diseaseInputData.description}</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">ç›‘æµ‹åŸå¸‚:</span>
                        <span class="summary-value">${diseaseInputData.city || 'æœªçŸ¥åŸå¸‚'}</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">å¤©æ°”çŠ¶å†µ:</span>
                        <span class="summary-value">æ¸©åº¦: ${diseaseInputData.temperature}Â°C, æ¹¿åº¦: ${diseaseInputData.humidity}%, å¤ªé˜³è¾å°„: ${diseaseInputData.radiation}W/mÂ², é™æ°´é‡: ${diseaseInputData.precipitation}mm</span>
                    </div>
                `;
                generateWeatherAdvice(diseaseInputData);
            } else {
                inputSummary.innerHTML = '<p>æœªæ‰¾åˆ°è¾“å…¥æ•°æ®ï¼Œè¯·è¿”å›é‡æ–°è¾“å…¥ã€‚</p >';
                weatherAdviceContent.textContent = "æ— å¤©æ°”æ•°æ®ï¼Œæ— æ³•ç”Ÿæˆå»ºè®®";
            }

            randomDiseaseList.forEach((disease, index) => {
                const diseaseItem = document.createElement('div');
                diseaseItem.className = 'disease-item';
                
                diseaseItem.innerHTML = `
                    <div class="disease-rank">${index + 1}</div>
                    <div class="disease-image">
                        < img src="${disease.image}" alt="${disease.name}">
                    </div>
                    <div class="disease-info">
                        <div class="disease-name">${disease.name}</div>
                        <div class="disease-desc">${disease.description}</div>
                        <div class="disease-probability">
                            <div class="probability-bar">
                                <div style="width: ${disease.probability}%; height: 100%; background-color: #4CAF50;"></div>
                            </div>
                            <div class="probability-value">${disease.probability}%</div>
                        </div>
                        <div class="disease-advice">
                            <div class="disease-advice-title">ğŸŸ  ${disease.name}é˜²æ²»å»ºè®®</div>
                            <div class="disease-advice-content">${disease.advice}</div>
                        </div>
                    </div>
                `;
                
                diseaseResults.appendChild(diseaseItem);
            });

            function generateWeatherAdvice(weatherData) {
                const temp = parseInt(weatherData.temperature) || 25;
                const humidity = parseInt(weatherData.humidity) || 65;
                const precipitation = parseInt(weatherData.precipitation) || 0;
                let advice = "";
                
                if (humidity > 75 && precipitation > 0) {
                    advice += "1. å½“å‰æ¹¿åº¦é«˜ä¸”æœ‰é™æ°´ï¼Œæ˜“è¯±å‘ç‚­ç–½ç—…ã€è¤æ–‘ç—…ç­‰çœŸèŒç—…å®³ï¼Œå»ºè®®åŠæ—¶æ’å‡ºæœå›­ç§¯æ°´ï¼Œé¿å…æœå®é•¿æ—¶é—´æ¹¿æ¶¦ï¼›";
                    advice += "<br>2. é›¨åå¯å–·æ–½ä¿æŠ¤æ€§æ€èŒå‰‚ï¼ˆå¦‚æ³¢å°”å¤šæ¶²ï¼‰ï¼Œé™ä½ç—…å®³æ‰©æ•£é£é™©ï¼›";
                } else if (temp > 30 && humidity > 70) {
                    advice += "1. é«˜æ¸©é«˜æ¹¿ç¯å¢ƒæ˜“å¯¼è‡´ç™½ç²‰ç—…çˆ†å‘ï¼Œå»ºè®®åŠ å¼ºæœå›­é€šé£ï¼Œä¿®å‰ªè¿‡å¯†ææ¡ï¼›";
                    advice += "<br>2. å¯é€‰ç”¨é†šèŒé…¯ç±»è¯å‰‚å–·é›¾é˜²æ²»ï¼Œæ³¨æ„é¿å¼€æ­£åˆé«˜æ¸©æ—¶æ®µæ–½è¯ï¼›";
                } else if (temp < 15) {
                    advice += "1. å½“å‰æ°”æ¸©è¾ƒä½ï¼Œç—…å®³å‘å±•ç¼“æ…¢ï¼Œä½†éœ€æ³¨æ„æœå®å‚¨å­˜ç¯å¢ƒçš„æ¸©æ¹¿åº¦æ§åˆ¶ï¼Œé¿å…ä½æ¸©é«˜æ¹¿å¯¼è‡´è…çƒ‚ï¼›";
                    advice += "<br>2. å¯æå‰å–·æ–½ä¿æŠ¤æ€§è¯å‰‚ï¼Œä¸ºæœå®æä¾›é˜²æŠ¤ï¼Œåº”å¯¹åç»­æ°”æ¸©å›å‡å¯èƒ½å¼•å‘çš„ç—…å®³ï¼›";
                } else {
                    advice += "1. å½“å‰å¤©æ°”æ¡ä»¶é€‚å®œï¼Œç—…å®³å‘ç”Ÿé£é™©è¾ƒä½ï¼Œå»ºè®®ä¿æŒæœå›­å¸¸è§„ç®¡ç†ï¼Œå®šæœŸå·¡æŸ¥æœå®çŠ¶æ€ï¼›";
                    advice += "<br>2. å¯æ ¹æ®æœæ ‘ç”Ÿé•¿é˜¶æ®µï¼Œè¡¥å……ç£·é’¾è‚¥ï¼Œå¢å¼ºæœå®æŠ—ç—…èƒ½åŠ›ï¼›";
                }
                
                weatherAdviceContent.innerHTML = advice;
            }

            backBtn.addEventListener('click', function() {
                window.location.href = 'index.html';
            });

            newIdentifyBtn.addEventListener('click', function() {
                window.location.href = 'index.html';
            });
        });
    </script>
</body>
</html>
